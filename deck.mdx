import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from 'code-surfer';
import { github, vsDark } from '@code-surfer/themes';

import pngLangsSpectrum from './images/langs-spectrum.png';
import pngTopicsSpectrum from './images/topics-spectrum.png';
import pngCompositionVsBlackbox from './images/composition-vs-blackbox.png';
import pngCompositionFractal from './images/composition-fractal.png';
import pngEffectsDontCompose from './images/effects-dont-compose.png';
import pngComposedEffects from './images/effects-composed.png';
import gifRound2 from './images/round-2.gif';
import gifItsOn from './images/its-on.gif';

export const theme = vsDark;

<h1>
  Strongly typed
  <br />
  Functional Programming
  <br />
  Workshop ğŸ‹ï¸ğŸ¦„
</h1>

<div style={{ position: 'fixed', bottom: 30, right: 30, margin: 0, padding: 0 }}>

<a href="https://gillchristian.xyz">Christian Gill</a> @ <a href="https://catawiki.com">Catawiki</a>

</div>

---

- Intro & disclaimers

- Type Driven Development

- Composition

- fp-ts: the basics

- io-ts: safe IO

- fp-ts: Functors

---

## [Introduction / Recap](https://fp-for-the-people-light.gillchristian.now.sh/)

---

## ğŸ™„ Disclaimers â—

---

<img src={pngLangsSpectrum} />

---

<img src={pngTopicsSpectrum} />

---

### ğŸ¤· TypeScript ğŸ¤·

---

### ğŸ˜± There will be FP theory ğŸ¤¦

---

### ğŸ¦„ There will be FP theory ğŸ‰

---

<CodeSurfer>

```ts title="Type signatures"
string[]

[string]
```

```ts title="Type signatures"
Promise<User>

Promise User
```

```ts title="Type signatures"
Map<Key, Value>

Map Key Value
```

```ts title="Type signatures"
(str: string) => number

string -> number
```

```ts title="Type signatures"
(str: string, what: string, to: string) => string

(string, string, string) -> string
```

```ts title="Type signatures"
<A, B>(f: (a: A) => B) => A[] => B[]

(a -> b) -> [a] -> [b]
```

```ts title="Type signatures"
(method: Method) => (url: string, conf: Config) => Promise<User>

Method -> (string, Config) -> Promise User 
```

</CodeSurfer>

---

## ğŸ‘® Type Driven Development ğŸ›¡ï¸

`src/00-tdd.ts`

---

<CodeSurfer>

```ts title="src/01.tdd.ts"
interface AsyncData<D> {
  isLoading: boolean;
  didLoading: boolean;
  data?: D;
  error?: Error;
}
```

```ts title="src/01.tdd.ts"
interface AsyncData<D> {
  isLoading: boolean;
  didLoading: boolean;
  data?: D;
  error?: Error;
}

type RemoteData<D> =
  | { tag: 'idle' }
  | { tag: 'loading' }
  | { tag: 'success', data: D }
  | { tag: 'failure', error: Error }
```

</CodeSurfer>

---

## ğŸ§± FP It's all about composition ğŸ“¦

---

<div style={{ padding: 50 }}>

<img src={pngCompositionVsBlackbox} />

</div>

---

<div style={{ padding: 50 }}>

<img src={pngCompositionFractal} />

</div>

---

<div style={{ padding: 100 }}>

<img src={pngEffectsDontCompose} />

</div>

---

<div style={{ padding: 100 }}>

<img src={pngComposedEffects} />

</div>

---


<div
  style={{
    height: '100vh',
    width: '100vw',
    backgroundImage: `url(${gifRound2})`,
    backgroundSize: 'cover',
    backgroundPosition: 'center',
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
  }}
>

## Round 2

</div>

---

## ğŸ““ Recap

- FP intro
    - Goals: what we want to achieve
    - Higher Order Functions
    - Pure Functions
- Type Safety / Type Driven Development
- Composition

---

<img src={gifItsOn} style={{ height: '100vh' }} />

---

### ğŸ§± [fp-ts](https://gcanti.github.io/fp-ts/) ğŸ§±

- `flow` and `pipe` (composition) ğŸ§ª
- Array utils
- Data last curried functions ğŸ›

`src/02.fp-ts.ts`

---

### ğŸ“¦ Boxed types

- Containers for:
    - Collections (Array)
    - Async operations (Promise / Task)
    - Error handling (Either)
    - Nullable or optional values (Option / Maybe)
    - Async state (RemoteData)

`src/03.box.ts`

---

### ğŸ›¡ï¸ Safe IO [io-ts](https://github.com/gcanti/io-ts)

Safe runtime decoding (and encoding) of unkown payloads

`src/04.io-ts.ts`

---

### Either ğŸ‘ˆğŸ‘‰

Functional error handling

`src/05.either.ts`

---

### Option ğŸ¤”

Functional optionals (nullable) handling

`src/06.option.ts`
